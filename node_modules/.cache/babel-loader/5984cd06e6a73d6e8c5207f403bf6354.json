{"ast":null,"code":"var _jsxFileName = \"C:\\\\home\\\\IT\\\\Python\\\\DjangoPractice\\\\front-end\\\\teach-app\\\\src\\\\components\\\\CommentLesson.js\";\nimport React, { Component } from \"react\";\nimport { Comment, Avatar, Form, Button, List, Input } from \"antd\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport { createComment } from \"../store/actions/lessons\";\nconst TextArea = Input.TextArea;\n\nconst CommentList = ({\n  comments\n}) => React.createElement(List, {\n  dataSource: comments,\n  itemLayout: \"horizontal\",\n  renderItem: props => React.createElement(Comment, Object.assign({}, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13\n    },\n    __self: this\n  })),\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n});\n\nconst Editor = ({\n  onChange,\n  onSubmit,\n  submitting,\n  value\n}) => React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 18\n  },\n  __self: this\n}, React.createElement(Form.Item, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 19\n  },\n  __self: this\n}, React.createElement(TextArea, {\n  rows: 4,\n  onChange: onChange,\n  value: value,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 20\n  },\n  __self: this\n})), React.createElement(Form.Item, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 22\n  },\n  __self: this\n}, React.createElement(Button, {\n  htmlType: \"submit\",\n  loading: submitting,\n  onClick: onSubmit,\n  type: \"primary\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 23\n  },\n  __self: this\n}, \"Add Comment\")));\n\nlet COMMENT = [];\nexport class CommentLesson extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      comments: [],\n      submitting: false,\n      value: \"\"\n    };\n\n    this.handleSubmit = () => {\n      if (!this.state.value) {\n        return;\n      }\n\n      this.setState({\n        submitting: true\n      });\n      const comment = {\n        user: this.props.username,\n        content: this.state.value,\n        lesson: this.props.lessonDetail.id\n      }; // this.props.createComment(this.props.token, comment);\n\n      console.log(comment);\n      setTimeout(() => {\n        this.setState({\n          submitting: false,\n          value: \"\",\n          comments: [{\n            author: this.props.username,\n            avatar: \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\",\n            content: React.createElement(\"p\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 71\n              },\n              __self: this\n            }, this.state.value),\n            datetime: moment().fromNow()\n          }, ...this.state.comments]\n        });\n      }, 1000);\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        value: e.target.value\n      });\n    };\n\n    this.getComments = () => {\n      const comment = this.props.comments;\n\n      if (comment) {\n        return comment.map(v => {\n          // return this.setState({\n          //   comments: [\n          //     {\n          //       author: this.props.username,\n          //       avatar:\n          //         \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\",\n          //       content: <p>{this.state.value}</p>,\n          //       datetime: moment().fromNow()\n          //     }\n          //   ]\n          // });\n          const comments = [{\n            author: v.user,\n            avatar: \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\",\n            content: v.content,\n            datetime: v.timestamp\n          }];\n          return comments;\n        });\n      } else {\n        return null;\n      }\n    };\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      return this.props.comments.map(v => {\n        const comments = [{\n          author: v.user,\n          avatar: \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\",\n          content: v.content,\n          datetime: v.timestamp\n        }];\n        console.log(comments);\n      });\n    }, 1000);\n  }\n\n  render() {\n    const _this$state = this.state,\n          comments = _this$state.comments,\n          submitting = _this$state.submitting,\n          value = _this$state.value;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, this.props.token !== null ? React.createElement(Comment, {\n      avatar: React.createElement(Avatar, {\n        src: \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\",\n        alt: \"Han Solo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }),\n      content: React.createElement(Editor, {\n        onChange: this.handleChange,\n        onSubmit: this.handleSubmit,\n        submitting: submitting,\n        value: value,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }) : null, comments.length > 0 && React.createElement(CommentList, {\n      comments: comments,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    token: state.auth.token,\n    username: state.auth.username,\n    lessonDetail: state.lessons.lessonDetail,\n    comments: state.lessons.commentsLesson\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    createComment: (token, comment) => dispatch(createComment(token, comment))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CommentLesson);","map":{"version":3,"sources":["C:\\home\\IT\\Python\\DjangoPractice\\front-end\\teach-app\\src\\components\\CommentLesson.js"],"names":["React","Component","Comment","Avatar","Form","Button","List","Input","moment","connect","createComment","TextArea","CommentList","comments","props","Editor","onChange","onSubmit","submitting","value","COMMENT","CommentLesson","state","handleSubmit","setState","comment","user","username","content","lesson","lessonDetail","id","console","log","setTimeout","author","avatar","datetime","fromNow","handleChange","e","target","getComments","map","v","timestamp","componentDidMount","render","token","length","mapStateToProps","auth","lessons","commentsLesson","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Comment, Avatar, Form, Button, List, Input } from \"antd\";\r\nimport moment from \"moment\";\r\nimport { connect } from \"react-redux\";\r\nimport { createComment } from \"../store/actions/lessons\";\r\n\r\nconst TextArea = Input.TextArea;\r\n\r\nconst CommentList = ({ comments }) => (\r\n  <List\r\n    dataSource={comments}\r\n    itemLayout=\"horizontal\"\r\n    renderItem={props => <Comment {...props} />}\r\n  />\r\n);\r\n\r\nconst Editor = ({ onChange, onSubmit, submitting, value }) => (\r\n  <div>\r\n    <Form.Item>\r\n      <TextArea rows={4} onChange={onChange} value={value} />\r\n    </Form.Item>\r\n    <Form.Item>\r\n      <Button\r\n        htmlType=\"submit\"\r\n        loading={submitting}\r\n        onClick={onSubmit}\r\n        type=\"primary\"\r\n      >\r\n        Add Comment\r\n      </Button>\r\n    </Form.Item>\r\n  </div>\r\n);\r\n\r\nlet COMMENT = [];\r\n\r\nexport class CommentLesson extends Component {\r\n  state = {\r\n    comments: [],\r\n    submitting: false,\r\n    value: \"\"\r\n  };\r\n\r\n  handleSubmit = () => {\r\n    if (!this.state.value) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      submitting: true\r\n    });\r\n\r\n    const comment = {\r\n      user: this.props.username,\r\n      content: this.state.value,\r\n      lesson: this.props.lessonDetail.id\r\n    };\r\n\r\n    // this.props.createComment(this.props.token, comment);\r\n    console.log(comment);\r\n\r\n    setTimeout(() => {\r\n      this.setState({\r\n        submitting: false,\r\n        value: \"\",\r\n        comments: [\r\n          {\r\n            author: this.props.username,\r\n            avatar:\r\n              \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\",\r\n            content: <p>{this.state.value}</p>,\r\n            datetime: moment().fromNow()\r\n          },\r\n          ...this.state.comments\r\n        ]\r\n      });\r\n    }, 1000);\r\n  };\r\n\r\n  componentDidMount() {\r\n    setTimeout(() => {\r\n      return this.props.comments.map(v => {\r\n        const comments = [\r\n          {\r\n            author: v.user,\r\n            avatar:\r\n              \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\",\r\n            content: v.content,\r\n            datetime: v.timestamp\r\n          }\r\n        ];\r\n        console.log(comments);\r\n      });\r\n    }, 1000);\r\n  }\r\n\r\n  handleChange = e => {\r\n    this.setState({\r\n      value: e.target.value\r\n    });\r\n  };\r\n\r\n  getComments = () => {\r\n    const comment = this.props.comments;\r\n    if (comment) {\r\n      return comment.map(v => {\r\n        // return this.setState({\r\n        //   comments: [\r\n        //     {\r\n        //       author: this.props.username,\r\n        //       avatar:\r\n        //         \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\",\r\n        //       content: <p>{this.state.value}</p>,\r\n        //       datetime: moment().fromNow()\r\n        //     }\r\n        //   ]\r\n        // });\r\n        const comments = [\r\n          {\r\n            author: v.user,\r\n            avatar:\r\n              \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\",\r\n            content: v.content,\r\n            datetime: v.timestamp\r\n          }\r\n        ];\r\n        return comments;\r\n      });\r\n    } else {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { comments, submitting, value } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        {/* {this.getComments()} */}\r\n        {this.props.token !== null ? (\r\n          <Comment\r\n            avatar={\r\n              <Avatar\r\n                src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"\r\n                alt=\"Han Solo\"\r\n              />\r\n            }\r\n            content={\r\n              <Editor\r\n                onChange={this.handleChange}\r\n                onSubmit={this.handleSubmit}\r\n                submitting={submitting}\r\n                value={value}\r\n              />\r\n            }\r\n          />\r\n        ) : null}\r\n\r\n        {comments.length > 0 && <CommentList comments={comments} />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    token: state.auth.token,\r\n    username: state.auth.username,\r\n    lessonDetail: state.lessons.lessonDetail,\r\n    comments: state.lessons.commentsLesson\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    createComment: (token, comment) => dispatch(createComment(token, comment))\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(CommentLesson);\r\n"]},"metadata":{},"sourceType":"module"}